{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "n8n Resume Monitoring Configuration",
  "description": "Configuration template for n8n workflows - copy to config.json and fill in values",
  "type": "object",
  "required": ["slack", "google_sheets", "monitoring"],
  "properties": {
    "slack": {
      "type": "object",
      "description": "Slack integration settings",
      "required": ["infra_alerts_channel_id", "deployments_channel_id"],
      "properties": {
        "infra_alerts_channel_id": {
          "type": "string",
          "description": "Slack channel ID for infrastructure alerts (format: C07XXXXXXXX)",
          "pattern": "^C[A-Z0-9]{10}$",
          "examples": ["C07ABC12345"]
        },
        "deployments_channel_id": {
          "type": "string",
          "description": "Slack channel ID for deployment notifications (format: C07YYYYYYYY)",
          "pattern": "^C[A-Z0-9]{10}$",
          "examples": ["C07XYZ67890"]
        },
        "credential_id": {
          "type": "string",
          "description": "n8n Slack OAuth2 credential ID (default: '1')",
          "default": "1"
        },
        "credential_name": {
          "type": "string",
          "description": "n8n Slack OAuth2 credential name",
          "default": "Slack account"
        }
      }
    },
    "google_sheets": {
      "type": "object",
      "description": "Google Sheets integration settings",
      "required": ["spreadsheet_id"],
      "properties": {
        "spreadsheet_id": {
          "type": "string",
          "description": "Google Sheets document ID (from spreadsheet URL)",
          "pattern": "^[a-zA-Z0-9_-]{44}$",
          "examples": ["1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"]
        },
        "spreadsheet_name": {
          "type": "string",
          "description": "Google Sheets spreadsheet name",
          "default": "Resume Monitoring"
        },
        "sheets": {
          "type": "object",
          "description": "Individual sheet configuration",
          "properties": {
            "downtime_log": {
              "type": "object",
              "properties": {
                "gid": {
                  "type": "string",
                  "description": "Sheet GID (0 for first sheet)",
                  "default": "gid=0"
                },
                "name": {
                  "type": "string",
                  "default": "Downtime Log"
                }
              }
            },
            "health_log": {
              "type": "object",
              "properties": {
                "gid": {
                  "type": "string",
                  "description": "Sheet GID (1 for second sheet)",
                  "default": "gid=1"
                },
                "name": {
                  "type": "string",
                  "default": "Health Log"
                }
              }
            },
            "deployment_log": {
              "type": "object",
              "properties": {
                "gid": {
                  "type": "string",
                  "description": "Sheet GID (2 for third sheet)",
                  "default": "gid=2"
                },
                "name": {
                  "type": "string",
                  "default": "Deployment Log"
                }
              }
            }
          }
        },
        "credential_id": {
          "type": "string",
          "description": "n8n Google Sheets OAuth2 credential ID (default: '2')",
          "default": "2"
        },
        "credential_name": {
          "type": "string",
          "description": "n8n Google Sheets OAuth2 credential name",
          "default": "Google Sheets account"
        }
      }
    },
    "monitoring": {
      "type": "object",
      "description": "Monitoring settings",
      "properties": {
        "site_url": {
          "type": "string",
          "format": "uri",
          "description": "Resume site base URL",
          "default": "https://resume.jclee.me"
        },
        "health_endpoint": {
          "type": "string",
          "format": "uri",
          "description": "Health check endpoint URL",
          "default": "https://resume.jclee.me/health"
        },
        "metrics_endpoint": {
          "type": "string",
          "format": "uri",
          "description": "Prometheus metrics endpoint URL",
          "default": "https://resume.jclee.me/metrics"
        },
        "grafana_dashboard_url": {
          "type": "string",
          "format": "uri",
          "description": "Grafana dashboard URL",
          "default": "https://grafana.jclee.me/d/resume"
        },
        "loki_url": {
          "type": "string",
          "format": "uri",
          "description": "Loki push endpoint URL",
          "default": "https://loki.jclee.me/loki/api/v1/push"
        },
        "health_check_interval": {
          "type": "string",
          "description": "Schedule expression for health check interval",
          "pattern": "^[0-9*/,-]+ [0-9*/,-]+ [0-9*/,-]+ [0-9*/,-]+ [0-9*/,-]+$",
          "default": "*/5 * * * *",
          "examples": ["*/5 * * * *", "*/10 * * * *", "0 * * * *"]
        },
        "http_timeout": {
          "type": "integer",
          "description": "HTTP request timeout in milliseconds",
          "default": 10000,
          "minimum": 1000,
          "maximum": 60000
        },
        "http_retry_max_tries": {
          "type": "integer",
          "description": "Maximum HTTP request retry attempts",
          "default": 3,
          "minimum": 1,
          "maximum": 10
        }
      }
    },
    "github": {
      "type": "object",
      "description": "GitHub webhook settings",
      "properties": {
        "webhook_path": {
          "type": "string",
          "description": "n8n webhook path (appended to n8n base URL)",
          "default": "resume-deploy",
          "examples": ["resume-deploy", "webhook/resume-deploy"]
        },
        "repository": {
          "type": "string",
          "description": "GitHub repository (owner/repo format)",
          "default": "qws941/resume"
        }
      }
    }
  }
}
