# ENVIRONMENTAL_MAP.md

## Project Identity

```yaml
project_name: "resume"
project_type: "static_portfolio"
primary_function: "Personal resume and portfolio website"
deployment_target: "Cloudflare Workers"
```

## Topology

```yaml
environments:
  production:
    url: "https://resume.jclee.me"
    platform: "Cloudflare Workers"
    region: "Global Edge Network"
    deployment_method: "GitHub Actions + wrangler-action@v3"

  development:
    url: "http://localhost:8000"
    platform: "Python HTTP Server"
    command: "cd web && python3 -m http.server 8000"
```

## Service Dependencies

```yaml
external_services:
  cloudflare_workers:
    purpose: "Serverless edge deployment"
    endpoint: "https://resume.jclee.me"
    config_file: "web/wrangler.toml"
    worker_file: "web/worker.js"

  github_actions:
    purpose: "CI/CD pipeline"
    workflow: ".github/workflows/deploy.yml"
    triggers: ["push to master"]
    secrets: ["CLOUDFLARE_API_TOKEN", "CLOUDFLARE_ACCOUNT_ID", "GEMINI_API_KEY"]

  gemini_api:
    purpose: "Deployment notes generation"
    usage: "Post-deployment summary generation"
    optional: true

internal_dependencies:
  python:
    version: "3.x"
    purpose: "PDF generation, local dev server"
    packages: ["markdown", "weasyprint", "beautifulsoup4"]

  nodejs:
    version: "20.x"
    purpose: "Worker code generation, Cloudflare deployment"
    packages: ["wrangler (global)"]
```

## File Structure Constraints

```yaml
critical_paths:
  web_portfolio:
    - "web/index.html"         # Main portfolio page
    - "web/resume.html"        # Resume HTML version
    - "web/worker.js"          # Generated worker code (deployed)
    - "web/generate-worker.js" # Worker generator script
    - "web/wrangler.toml"      # Cloudflare Workers config

  resume_sources:
    - "master/resume_master.md"  # Source of truth
    - "master/resume_final.md"   # Submission version
    - "company-specific/*.md"    # Company-tailored versions

  automation:
    - "scripts/generate_pdf.py"  # Markdown → PDF converter
    - ".github/workflows/deploy.yml" # CI/CD pipeline

read_only_files: []

generated_files:
  - "web/worker.js"  # Generated by generate-worker.js

symlinked_paths: []
```

## Deployment Workflow

```yaml
deployment_flow:
  trigger: "git push origin master"

  steps:
    1_github_actions:
      action: "Checkout code"
      runner: "ubuntu-latest"

    2_deploy_worker:
      action: "wrangler deploy"
      working_directory: "web/"
      config: "wrangler.toml"
      authentication: "CLOUDFLARE_API_TOKEN"

    3_generate_notes:
      action: "Gemini API summary"
      dependency: "deploy-worker success"
      optional: true

  verification:
    - "curl https://resume.jclee.me → HTTP 200"
    - "curl https://resume.jclee.me/resume → HTTP 200"
```

## Development Workflow

```yaml
local_development:
  setup:
    - "cd web"
    - "python3 -m http.server 8000"
    - "Open http://localhost:8000/index.html"

  worker_generation:
    trigger: "After editing index.html or resume.html"
    command: "cd web && node generate-worker.js"
    output: "web/worker.js"

  deployment:
    command: "git push origin master"
    automation: "GitHub Actions handles deployment"

pdf_generation:
  methods:
    weasyprint:
      command: "python3 scripts/generate_pdf.py"
      dependencies: ["markdown", "weasyprint", "beautifulsoup4"]

    pandoc:
      command: "cd toss && ./pdf-convert.sh"
      dependencies: ["pandoc", "texlive-xetex", "texlive-lang-korean"]
```

## Resource Constraints

```yaml
computational:
  memory: "N/A (serverless)"
  cpu: "N/A (serverless)"

storage:
  repository_size: "< 50MB"
  worker_size_limit: "1MB (Cloudflare Workers free tier)"

network:
  cloudflare_workers: "100,000 requests/day (free tier)"
  github_actions: "2,000 minutes/month (free tier)"
```

## Security Context

```yaml
secrets_management:
  github_secrets:
    - "CLOUDFLARE_API_TOKEN"     # Cloudflare API authentication
    - "CLOUDFLARE_ACCOUNT_ID"    # Cloudflare account identifier
    - "GEMINI_API_KEY"           # Gemini API (optional)

  public_information:
    - "Email: qws941@kakao.com"
    - "Phone: 010-5757-9592"
    - "GitHub: github.com/qws941"
    - "Address: 경기도 시흥시 장현천로61, 307동 1301호"

sensitive_files: []
```

## Observability

```yaml
monitoring:
  cloudflare_analytics:
    - "Request count"
    - "Response time"
    - "Error rate"
    - "Geographic distribution"

  github_actions:
    - "Workflow execution status"
    - "Deployment success rate"
    - "Build duration"

logging:
  cloudflare_workers: "Cloudflare Workers logs"
  github_actions: "GitHub Actions workflow logs"

grafana_integration:
  status: "External Reference"
  dashboard: "https://grafana.jclee.me (Public Dashboard)"
  purpose: "Portfolio project monitoring showcase"
  note: "This project references the public Grafana dashboard for portfolio demonstration"
```

## Known Constraints

```yaml
limitations:
  - "Cloudflare Workers free tier: 100,000 requests/day"
  - "Worker bundle size: max 1MB"
  - "No server-side state (stateless)"
  - "No database (static content only)"

assumptions:
  - "Portfolio content changes infrequently"
  - "Traffic within free tier limits"
  - "GitHub Actions builds succeed within timeout"

edge_cases:
  - "Korean font support in PDF generation"
  - "HTML escaping in worker.js generation (backticks, $)"
  - "Cache-Control headers (3600s)"
```

## Project Status

```yaml
current_state: "Production - Live"
last_deployment: "2025-10-16 (Content Update)"
health_status: "Healthy"
recent_updates:
  - "Content: Added Public Grafana Dashboard showcase"
  - "Content: Updated Nextrade as Securities Exchange"
  - "Portfolio: Enhanced public observability emphasis"
  - "Tests: 24/24 passing (100% success rate)"
  - "Security: Zero vulnerabilities (npm audit clean)"
verification:
  - "https://resume.jclee.me → HTTP 200 ✅"
  - "https://resume.jclee.me/resume → HTTP 200 ✅"
  - "All unit tests: 24 passed ✅"
  - "ESLint: Zero issues ✅"
  - "Security scan: Zero vulnerabilities ✅"
```

---

**Last Updated**: 2025-10-16
**Environment Version**: 1.3
**Maintained By**: OpenCode + @jclee
**Key Updates**: Public Grafana Dashboard integration, Nextrade Securities Exchange details
